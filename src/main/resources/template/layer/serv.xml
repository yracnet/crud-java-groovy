<?xml version="1.0" encoding="UTF-8"?>
<files>
    <% mapper.entity.each {
    def className = fn.toName(it.clazz)
    def classVar  = fn.toNameVar(it.clazz)
    def classText = fn.toNameText(it.clazz)
    def classConst= fn.toNameConst(it.clazz)
    def basics = it.attributes.basic
    def ids    = it.attributes.id
    %>
    <file name="${className}Serv" layer="serv" dir="." package="${groupId}.${artifactId}.${module}">
        interface ${className}Serv {
        
        ListResult<${className}Data> filter${className}(${className}Filter ${classVar}Filter);
        
        DataResult<${className}Data> create${className}(${className}Data ${classVar}Data);
        
        DataResult<${className}Data> update${className}(${className}Data ${classVar}Data);
        
        DataResult<${className}Data> remove${className}(${className}Data ${classVar}Data);
        
        }
    </file>
    <file name="ListResult" layer="serv" dir="." package="${groupId}.${artifactId}.${module}">
        <![CDATA[
        public class Result {
        public String operation;
        public String description;
        public List<Message> messageList;
        }
        public class ListResult<T> extends Result {
        public List<T> list;
        }
        public class DataResult<T> extends Result {
        public T data;
        }
        ]]>
    </file>
    <file name="${className}Data" layer="serv" dir="." package="${groupId}.${artifactId}.${module}.state">
        public class ${className}Data implements Serialize{
        <% ids.each{  %>
        public Value<${it.attributeType}> ${it.name};
        <% }
        basics.each{  %>
        public Value<${it.attributeType}> ${it.name};
        <% } %>
        }
    </file>
    <file name="${className}Filter" layer="serv" dir="." package="${groupId}.${artifactId}.${module}.state">
        public class ${className}Filter implements Serialize{
        <% ids.each{  %>
        public Filter<${it.attributeType}> ${it.name};
        <% }
        basics.each{  %>
        public Filter<${it.attributeType}> ${it.name};
        <% } %>
        }
    </file>
    <% } %>
</files>
