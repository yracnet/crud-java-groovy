<?xml version="1.0" encoding="UTF-8"?>
<files>
    <% 
    def entityRef = [:]
    mapper.entity.each { entityRef[it.id] = it }
    entityRef.each {
    id, entity ->
    def pkg    = fn.pkg(groupId, artifactId, module);  
    def data   = fn.deduceName(entity.clazz)
    def filter = fn.deduceName(entity.clazz, 'Filter')
    def serv   = fn.deduceName(entity.clazz, 'Serv')
    def rest   = fn.deduceName(entity.clazz, 'Rest')
    def viewCtrl = fn.deduceName(entity.clazz, '-ctrl')
    def viewPart = fn.deduceName(entity.clazz, '-part')
    def viewServ = fn.deduceName(entity.clazz, '-serv')
    def attr   = []
    attr.addAll(entity.attributes.id.collect{fn.deduceAttrName(it)})
    attr.addAll(entity.attributes.basic.collect{fn.deduceAttrName(it)})
    attr.addAll(entity.attributes.oneToMany.collect{fn.deduceRefName(it, entityRef)})
    attr.addAll(entity.attributes.oneToOne.collect{fn.deduceRefName(it, entityRef)})
    attr.addAll(entity.attributes.manyToOne.collect{fn.deduceRefName(it, entityRef)})
    %>
    <file name="${data.uscore}.xhtml" layer="view" dir="." skip="false"><![CDATA[
<div ng-controller="${viewCtrl.uscore}">
    <section ng-if="bloqueVisible('inbox')">
        <header>Listado de ${data.text}</header>
        <section
            ${data.colon}-filter = "simple"
            ${data.colon}-object = "data.filter"
            ${data.colon}-option = "data.option">
            Load Block Filter
        </section>
        <div>
            <button ng-click="abrirBloqueClick('create', data.origin)">Crear<button>
            <button ng-click="abrirBloqueClick('update', data.select)">Editar<button>
            <button ng-click="abrirBloqueClick'detail', data.select)">Detalle<button>
            <button ng-click="abrirBloqueClick('delete', data.select)">Eliminar<button>
        </div>
        <section
            ${data.colon}-grid = "simple"
            ${data.colon}-values = "data.values"
            ${data.colon}-select = "data.select">
            Load Block Form
        </section>
    <section>
    <section ng-if="bloqueVisible('create')">
        <header>Registro ${data.text}</header>
        <section
            ${data.colon}-form  = "enabled"
            ${data.colon}-object = "data.object"
            ${data.colon}-option = "data.option">
            Load Block Form
        </section>
        <footer>
            <button ng-click="registrar${data.type}Click()">Guardar<button>
            <button ng-click="cancelar${data.type}Click()">Cancelar<button>
        </footer>
    <section>
    <section ng-if="bloqueVisible('update')">
        <header>Actualizar ${data.text} #<b ng-bind="data.object.id"/></header>
        <section
            ${data.colon}-form  = "enabled"
            ${data.colon}-object = "data.object"
            ${data.colon}-option = "data.option">
            Load Block Form
        </section>
        <footer>
            <button ng-click="actualizar${data.type}Click()">Guardar<button>
            <button ng-click="cancelar${data.type}Click()">Cancelar<button>
        </footer>
    <section>
    <section ng-if="bloqueVisible('detail')">
        <header>Detalle ${data.text} #<b ng-bind="data.object.id"/></header>
        <section
            ${data.colon}-form  = "disabled"
            ${data.colon}-object = "data.object"
            ${data.colon}-option = "data.option">
            Load Block Form
        </section>
        <footer>
            <button ng-click="cancelar${data.type}Click()">Cancelar<button>
        </footer>
    <section>
    <section ng-if="bloqueVisible('remove')">
        <header>Eliminar ${data.text} #<b ng-bind="data.object.id"/></header>
        <section
            ${data.colon}-form  = "disabled"
            ${data.colon}-object = "data.object"
            ${data.colon}-option = "data.option">
            Load Block Form
        </section>
        <footer>
            <button ng-click="eliminar${data.type}Click()">Eliminar<button>
            <button ng-click="cancelar${data.type}Click()">Cancelar<button>
        </footer>
    <section>
</div>
]]></file>
    <% } %>
</files>
